<div class="animated fadeIn">
  <div class="row">

    <div class="col-md-6 offset-md-{{model.parentId != null ? 1 : 0}}">
      <div class="form-group"
           [class.has-danger]="!rateNameControl.valid && (rateNameControl.dirty || rateNameControl.touched)"
           [class.has-success]="rateNameControl.valid && rateNameControl.touched">
        <div class="input-group">
          <div class="input-group-btn">
            <button type="button" class="btn btn-light"
                    [class.btn-light-disabled]="!model.canToggle"
                    [class.dropdown-toggle]="model.canToggle"
                    (click)="model.canToggle ? model.isRate = !model.isRate : null">
              <span class="small-caps">{{model.isRate ? 'ставка' : 'группа' }}</span>
            </button>
          </div>
          <input type="text" class="form-control"
                 autocomplete="off"
                 placeholder=""

                 #rateNameControl="ngForm"
                 [ngClass]="controlStateClasses(rateNameControl)"
                 required
                 [class.form-control-danger]="!rateNameControl.valid && (rateNameControl.dirty || rateNameControl.touched)"
                 [class.form-control-success]="rateNameControl.valid && rateNameControl.touched"
                 [(ngModel)]="model.name"
                 ngControl="rateName{{model.id}}" />
        </div>
        <em *ngIf="!rateNameControl.valid && (rateNameControl.dirty || rateNameControl.touched)"
            class="error form-control-feedback">Некорректное наименование</em>
      </div>
    </div>
    <!-- /col -->

    <div class="col-md-2" *ngIf="model.isRate">
      <div class="form-group"
           [class.has-danger]="!rateAmountControl.valid && (rateAmountControl.dirty || rateAmountControl.touched)"
           [class.has-success]="rateAmountControl.valid && rateAmountControl.touched">
        <input type="number" class="form-control"
               placeholder="Сумма"
               autocomplete="off"

               #rateAmountControl="ngForm"
               [ngClass]="controlStateClasses(rateAmountControl)"
               required
               [class.form-control-danger]="!rateAmountControl.valid && (rateAmountControl.dirty || rateAmountControl.touched)"
               [class.form-control-success]="rateAmountControl.valid && rateAmountControl.touched"
               [(ngModel)]="model.amount"
               ngControl="rateAmount{{model.id}}" />
        <em *ngIf="!rateAmountControl.valid && (rateAmountControl.dirty || rateAmountControl.touched)"
            class="error form-control-feedback">Некорректное значение</em>
      </div>
    </div>
    <!-- /col -->

    <div class="col-md-3">
      <div class="row">

        <div class="col-md-4" *ngIf="model.isRate">
          <div class="input-group-btn">
            <button type="button" class="btn btn-light dropdown-toggle"
              (click)="model.unitName = model.unitName == 'день' ? 'час' : 'день'">
              <span class="small-caps">{{model.unitName}}</span>
            </button>
          </div>
        </div>
        <!-- /col -->

        <div class="col-md-2"
             *ngIf="model.showMinus"
             (click)="emitRemoveRate()">
          <button type="button" class="btn btn-secondary text-muted cm-minus"><span>—</span></button>
        </div>
        <!-- /col -->

        <div class="col-md-2"
             (click)="emitAddRate()"
             [class.offset-md-1]="model.showMinus">
          <button type="button" class="btn btn-secondary text-muted cm-plus"><span>—</span></button>
        </div>
        <!-- /col -->

      </div>
      <!-- /row -->
    </div>
    <!-- /col -->

  </div>
  <!-- /row -->
</div>